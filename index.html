<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BADMAN â€¢ Christon</title>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      background:#000;
      color:#e0e0e0;
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:16px;
      overflow-x:hidden;
      position:relative;
    }

    .player-wrapper {
      position:relative;
      width:100%;
      max-width:420px;
      perspective:1600px;
    }

    .player-container {
      width:100%;
      background:linear-gradient(145deg,#1e1e1e,#0c0c0c);
      border-radius:32px;
      overflow:hidden;
      box-shadow:
        0 60px 140px rgba(0,0,0,0.95),
        inset 0 6px 16px rgba(255,255,255,0.06),
        inset 0 -6px 16px rgba(0,0,0,1),
        0 0 0 2px rgba(255,255,255,0.03);
      border:3px solid #141414;
      transform-style:preserve-3d;
      transform:rotateX(6deg) rotateY(4deg) scale(1.02);
      transition:transform 0.8s ease;
    }

    .player-container:hover {
      transform:rotateX(4deg) rotateY(3deg) scale(1.04);
    }

    .top-bar {
      height:54px;
      background:linear-gradient(to bottom,#2e2e2e,#1e1e1e);
      border-bottom:2px solid #0f0f0f;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:15px;
      font-weight:700;
      letter-spacing:2.5px;
      color:#ffd700;
      text-shadow:0 0 14px rgba(255,215,0,0.5);
      position:relative;
    }

    .led {
      position:absolute;
      left:16px;
      width:12px;
      height:12px;
      background:#c00;
      border-radius:50%;
      box-shadow:0 0 12px #c00, inset 0 0 4px #900;
      animation:led-pulse 3s ease-in-out infinite;
    }

    .led.playing {
      background:#0c0;
      box-shadow:0 0 12px #0c0, inset 0 0 4px #090;
      animation:led-play 1.4s ease-in-out infinite;
    }

    @keyframes led-pulse {
      0%,100% { opacity:0.6; transform:scale(1); }
      50%     { opacity:1; transform:scale(1.15); }
    }

    @keyframes led-play {
      0%,100% { opacity:0.8; transform:scale(1); }
      50%     { opacity:1; transform:scale(1.2); }
    }

    .screen-area {
      padding:32px 22px 28px;
      background:#000;
      position:relative;
    }

    .cassette-body {
      position:relative;
      width:100%;
      aspect-ratio:1.8 / 1;
      background:linear-gradient(145deg,#222,#111);
      border-radius:16px;
      margin-bottom:28px;
      box-shadow:
        inset 0 0 60px rgba(0,0,0,0.9),
        0 12px 48px rgba(0,0,0,0.8);
      overflow:hidden;
    }

    .reel-left, .reel-right {
      position:absolute;
      width:90px;
      height:90px;
      top:50%;
      transform:translateY(-50%);
      background:radial-gradient(circle at 40% 40%, #333, #222 60%, #1a1a1a);
      border-radius:50%;
      border:8px solid #2a2a2a;
      box-shadow:
        inset 0 0 30px rgba(0,0,0,0.8),
        0 0 20px rgba(255,215,0,0.15);
      animation:spin-reel 18s linear infinite paused;
    }

    .reel-left { left:10%; animation-direction:normal; }
    .reel-right { right:10%; animation-direction:reverse; }

    .playing .reel-left,
    .playing .reel-right {
      animation-play-state:running;
    }

    @keyframes spin-reel {
      from { transform:translateY(-50%) rotate(0deg); }
      to   { transform:translateY(-50%) rotate(360deg); }
    }

    .reel-hub {
      position:absolute;
      inset:20px;
      background:#1a1a1a;
      border-radius:50%;
      box-shadow:inset 0 0 20px #000;
    }

    .reel-tape {
      position:absolute;
      inset:0;
      background:repeating-linear-gradient(45deg, #222, #222 4px, #1e1e1e 4px, #1e1e1e 8px);
      border-radius:50%;
      opacity:0.4;
    }

    .album-art {
      width:100%;
      aspect-ratio:1/1;
      background:#0a0a0a;
      border-radius:16px;
      overflow:hidden;
      margin:24px 0;
      box-shadow:
        inset 0 0 80px rgba(0,0,0,0.95),
        0 12px 48px rgba(0,0,0,0.8);
      position:relative;
    }

    .album-art img {
      width:100%;
      height:100%;
      object-fit:cover;
      filter:brightness(0.9) contrast(1.15);
    }

    .loading-overlay {
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.7);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
      color:#aaa;
      z-index:10;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.4s;
    }

    .loading-overlay.active {
      opacity:1;
      pointer-events:all;
    }

    .now-playing {
      text-align:center;
      margin-bottom:24px;
      position:relative;
    }

    .track-title {
      font-size:20px;
      font-weight:700;
      margin-bottom:8px;
      color:#fff;
      text-shadow:0 0 12px rgba(255,215,0,0.2);
    }

    .track-artist {
      font-size:15px;
      color:#aaa;
    }

    .progress-container {
      height:6px;
      background:#1a1a1a;
      border-radius:3px;
      margin:18px 0;
      cursor:pointer;
      overflow:hidden;
      box-shadow:inset 0 1px 3px rgba(0,0,0,0.8);
    }

    .progress-bar {
      height:100%;
      width:0;
      background:linear-gradient(90deg,#ffd700,#ffeb3b);
      border-radius:3px;
      transition:width 0.15s linear;
      box-shadow:0 0 12px rgba(255,215,0,0.6);
    }

    .time {
      display:flex;
      justify-content:space-between;
      font-size:13px;
      color:#777;
      margin-bottom:24px;
    }

    .controls {
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:0 16px;
    }

    .control-btn {
      width:52px;
      height:52px;
      border-radius:50%;
      background:linear-gradient(145deg,#222,#111);
      border:1px solid #2a2a2a;
      color:#e0e0e0;
      font-size:0;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:all 0.25s cubic-bezier(0.17,0.67,0.37,1.27);
      box-shadow:0 4px 12px rgba(0,0,0,0.7), inset 0 1px 3px rgba(255,255,255,0.05);
      position:relative;
      overflow:hidden;
    }

    .control-btn svg {
      width:28px;
      height:28px;
      fill:#e0e0e0;
      transition:fill 0.25s;
    }

    .control-btn:hover {
      transform:scale(1.12);
      box-shadow:0 8px 24px rgba(255,215,0,0.3), inset 0 1px 4px rgba(255,215,0,0.15);
      border-color:#ffd700;
    }

    .control-btn:hover svg { fill:#ffd700; }

    .control-btn:active { transform:scale(0.94); box-shadow:0 2px 8px rgba(0,0,0,0.6); }

    .play-pause {
      width:70px;
      height:70px;
      background:linear-gradient(145deg,#ffd700,#ffeb3b);
      box-shadow:0 10px 40px rgba(255,215,0,0.5), inset 0 2px 6px rgba(255,255,255,0.4);
      border:none;
    }

    .play-pause svg { width:36px; height:36px; fill:#000; }

    .volume-container {
      display:flex;
      align-items:center;
      gap:14px;
      margin-top:24px;
    }

    .volume-slider {
      flex:1;
      height:6px;
      background:#1a1a1a;
      border-radius:3px;
      cursor:grab;
      box-shadow:inset 0 1px 3px rgba(0,0,0,0.7);
      position:relative;
    }

    .volume-bar {
      height:100%;
      width:70%;
      background:#ffd700;
      border-radius:3px;
      box-shadow:0 0 12px rgba(255,215,0,0.5);
    }

    .tracklist {
      margin-top:36px;
      padding:0 12px 40px;
      max-height:360px;
      overflow-y:auto;
    }

    .track-item {
      padding:14px 0;
      border-bottom:1px solid #111;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:15px;
      color:#aaa;
      cursor:pointer;
      transition:all 0.2s;
    }

    .track-item.current { color:#ffd700; font-weight:600; }
    .track-item:hover { color:#fff; background:rgba(255,215,0,0.05); }

    .track-num { width:28px; text-align:center; color:#555; font-weight:600; }

    .tracklist::-webkit-scrollbar { width:6px; }
    .tracklist::-webkit-scrollbar-thumb { background:#333; border-radius:3px; }

    .side-credit {
      position:fixed;
      bottom:20px;
      right:20px;
      font-size:13px;
      color:#555;
      opacity:0.7;
      font-weight:500;
      pointer-events:none;
      text-align:right;
      max-width:240px;
    }

    @media (max-width:480px) {
      .player-wrapper { max-width:360px; }
      .player-container { transform:rotateX(4deg) rotateY(2deg) scale(1.01); }
      .side-credit { font-size:12px; right:12px; bottom:12px; }
    }
  </style>
</head>
<body>

<div class="player-wrapper">
  <div class="player-container">
    <div class="top-bar">
      <div class="led" id="ledIndicator"></div>
      BADMAN â€¢ CHRISTON
    </div>

    <div class="screen-area">
      <div class="cassette-body">
        <div class="reel-left"><div class="reel-hub"></div><div class="reel-tape"></div></div>
        <div class="reel-right"><div class="reel-hub"></div><div class="reel-tape"></div></div>
      </div>

      <div class="album-art">
        <img src="https://i.ibb.co/KpyNrYD6/BADMAN-COVER-3.jpg" alt="BADMAN Album Cover">
        <div class="loading-overlay" id="loadingOverlay">Loading trackâ€¦</div>
      </div>

      <div class="now-playing">
        <div class="track-title" id="currentTitle">Badman Intro</div>
        <div class="track-artist">Christon</div>
      </div>

      <div class="progress-container" id="progressContainer">
        <div class="progress-bar" id="progressBar"></div>
      </div>

      <div class="time">
        <span id="currentTime">0:00</span>
        <span id="duration">0:00</span>
      </div>

      <div class="controls">
        <div class="control-btn" id="shuffleBtn" title="Shuffle">
          <svg viewBox="0 0 24 24"><path d="M14 20v-2h2.586l-3.293-3.293 1.414-1.414L18 16.586V14h2v6h-6zM4 4v2H2.414l3.293 3.293-1.414 1.414L2 7.414V10H0V4h6zM20 4v6h-2V7.414l-3.293 3.293-1.414-1.414L16.586 6H14V4h6zM8 18H2v-2h4.586l3.293-3.293 1.414 1.414L7.414 18H8v2z"/></svg>
        </div>
        <div class="control-btn" id="prevBtn">
          <svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm4 6l10-6v12z"/></svg>
        </div>
        <div class="control-btn play-pause" id="playPauseBtn">
          <svg id="playIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none"><path d="M6 19h4V5H6zm8 0h4V5h-4z"/></svg>
        </div>
        <div class="control-btn" id="nextBtn">
          <svg viewBox="0 0 24 24"><path d="M16 6h2v12h-2zm-4 6l-10-6v12z"/></svg>
        </div>
        <div class="control-btn" id="repeatBtn" title="Repeat">
          <svg viewBox="0 0 24 24"><path d="M17 4l-5 5-1.5-1.5L15.5 2.5 17 4zm-5 14l5-5 1.5 1.5L12.5 21.5 12 20zM6 6h2v12H6zm10 0h2v12h-2z"/></svg>
        </div>
      </div>

      <div class="volume-container">
        <span>ðŸ”ˆ</span>
        <div class="volume-slider" id="volumeSlider">
          <div class="volume-bar" id="volumeBar"></div>
        </div>
      </div>

      <div class="tracklist" id="tracklist"></div>
    </div>
  </div>
</div>

<div class="side-credit">
  PRODUCED & PERFORMED<br>BY CHRISTON<br>@christonwords â€¢ softparish@gmail.com
</div>

<audio id="audioPlayer" preload="auto"></audio>

<script>
  const audio = document.getElementById('audioPlayer');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const playIcon = document.getElementById('playIcon');
  const pauseIcon = document.getElementById('pauseIcon');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const shuffleBtn = document.getElementById('shuffleBtn');
  const repeatBtn = document.getElementById('repeatBtn');
  const progressContainer = document.getElementById('progressContainer');
  const progressBar = document.getElementById('progressBar');
  const currentTimeEl = document.getElementById('currentTime');
  const durationEl = document.getElementById('duration');
  const currentTitleEl = document.getElementById('currentTitle');
  const tracklistEl = document.getElementById('tracklist');
  const volumeSlider = document.getElementById('volumeSlider');
  const volumeBar = document.getElementById('volumeBar');
  const ledIndicator = document.getElementById('ledIndicator');
  const loadingOverlay = document.getElementById('loadingOverlay');

  const baseUrl = "https://github.com/christonwords/Vanity/releases/download/1.0/";

  const tracks = [
    { title: "Badman Intro", src: baseUrl + "Badman.Intro.mp3" },
    { title: "my lord ... i need you", src: baseUrl + "my.lord....i.need.you.mp3" },
    { title: "can you feel it", src: baseUrl + "can.you.feel.it.mp3" },
    { title: "this is me", src: baseUrl + "this.is.me.mp3" },
    { title: "the badman tracks", src: baseUrl + "the.badman.mp3" },
    { title: "canâ€™t second guess", src: baseUrl + "can.t.second.guess.mp3" },
    { title: "doomsday", src: baseUrl + "doomsday.mp3" },
    { title: "way back when", src: baseUrl + "way.back.when.mp3" },
    { title: "the aftermath", src: baseUrl + "the.aftermath.mp3" },
    { title: "both feet in", src: baseUrl + "both.feet.in.mp3" },
    { title: "value what i do", src: baseUrl + "value.what.i.do.mp3" },
    { title: "this morning", src: baseUrl + "this.morning.mp3" }
  ];

  let currentTrack = 0;
  let isPlaying = false;
  let isShuffle = false;
  let repeatMode = 'off';
  let nextPreloaded = false;

  // Populate tracklist
  tracks.forEach((track, index) => {
    const item = document.createElement('div');
    item.className = 'track-item';
    item.innerHTML = `
      <span class="track-num">${index + 1}</span>
      <span>${track.title}</span>
      <span>...</span>
    `;
    item.addEventListener('click', () => {
      currentTrack = index;
      loadAndPlay();
      play();
    });
    tracklistEl.appendChild(item);
  });

  function preloadNext() {
    if (currentTrack + 1 < tracks.length) {
      const nextAudio = new Audio();
      nextAudio.src = tracks[currentTrack + 1].src;
      nextAudio.preload = 'auto';
      nextPreloaded = true;
    }
  }

  function loadAndPlay() {
    loadingOverlay.classList.add('active');
    audio.src = tracks[currentTrack].src;
    audio.load();
    currentTitleEl.textContent = tracks[currentTrack].title;

    document.querySelectorAll('.track-item').forEach((el, i) => {
      el.classList.toggle('current', i === currentTrack);
    });

    audio.onloadeddata = () => {
      loadingOverlay.classList.remove('active');
      if (isPlaying) play();
      preloadNext();
    };

    audio.onerror = () => {
      loadingOverlay.textContent = "Error loading track";
    };
  }

  function play() {
    audio.play().catch(() => {});
    playIcon.style.display = 'none';
    pauseIcon.style.display = 'block';
    isPlaying = true;
    ledIndicator.classList.add('playing');
    document.querySelector('.player-container').classList.add('playing');
  }

  function pause() {
    audio.pause();
    playIcon.style.display = 'block';
    pauseIcon.style.display = 'none';
    isPlaying = false;
    ledIndicator.classList.remove('playing');
    document.querySelector('.player-container').classList.remove('playing');
  }

  playPauseBtn.addEventListener('click', () => {
    isPlaying ? pause() : play();
  });

  prevBtn.addEventListener('click', () => {
    currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
    loadAndPlay();
    play();
  });

  nextBtn.addEventListener('click', () => {
    currentTrack = (currentTrack + 1) % tracks.length;
    loadAndPlay();
    play();
  });

  shuffleBtn.addEventListener('click', () => {
    isShuffle = !isShuffle;
    shuffleBtn.style.color = isShuffle ? '#ffd700' : '#aaa';
  });

  repeatBtn.addEventListener('click', () => {
    if (repeatMode === 'off') {
      repeatMode = 'all';
      repeatBtn.style.color = '#ffd700';
    } else if (repeatMode === 'all') {
      repeatMode = 'one';
    } else {
      repeatMode = 'off';
      repeatBtn.style.color = '#aaa';
    }
  });

  audio.addEventListener('timeupdate', () => {
    if (!audio.duration) return;
    const progress = (audio.currentTime / audio.duration) * 100;
    progressBar.style.width = `${progress}%`;

    const curMin = Math.floor(audio.currentTime / 60);
    const curSec = Math.floor(audio.currentTime % 60).toString().padStart(2,'0');
    currentTimeEl.textContent = `${curMin}:${curSec}`;
  });

  audio.addEventListener('loadedmetadata', () => {
    const durMin = Math.floor(audio.duration / 60);
    const durSec = Math.floor(audio.duration % 60).toString().padStart(2,'0');
    durationEl.textContent = `${durMin}:${durSec}`;
  });

  audio.addEventListener('ended', () => {
    if (repeatMode === 'one') {
      audio.currentTime = 0;
      play();
    } else {
      if (isShuffle) currentTrack = Math.floor(Math.random() * tracks.length);
      else currentTrack = (currentTrack + 1) % tracks.length;
      loadAndPlay();
      play();
    }
  });

  progressContainer.addEventListener('click', (e) => {
    const rect = progressContainer.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    audio.currentTime = pos * audio.duration;
  });

  // Improved drag volume (mouse + touch)
  let isDraggingVolume = false;

  const updateVolume = (e) => {
    if (!isDraggingVolume) return;
    e.preventDefault();
    const rect = volumeSlider.getBoundingClientRect();
    let clientX = e.clientX || (e.touches && e.touches[0].clientX);
    let pos = (clientX - rect.left) / rect.width;
    pos = Math.max(0, Math.min(1, pos));
    audio.volume = pos;
    volumeBar.style.width = `${pos * 100}%`;
  };

  volumeSlider.addEventListener('mousedown', (e) => { isDraggingVolume = true; updateVolume(e); });
  volumeSlider.addEventListener('touchstart', (e) => { isDraggingVolume = true; updateVolume(e); }, { passive:false });

  document.addEventListener('mousemove', updateVolume);
  document.addEventListener('touchmove', updateVolume, { passive:false });

  document.addEventListener('mouseup', () => isDraggingVolume = false);
  document.addEventListener('touchend', () => isDraggingVolume = false);

  // Initial load
  loadAndPlay();
  audio.volume = 0.7;
  volumeBar.style.width = '70%';
</script>

</body>
</html>
